
> @accomplish/desktop@0.3.8 test:unit C:\Users\david\Documents\GitHub\accomplish\apps\desktop
> vitest run --config vitest.unit.config.ts


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/david/Documents/GitHub/accomplish/apps/desktop[39m

 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/config.unit.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/adapter.unit.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 190[2mms[22m[39m
[90mstdout[2m | __tests__/main/ipc/handlers-utils.unit.test.ts
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mConstructor[2m > [22m[2mshould create task manager with default max concurrent tasks
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false when no flow is active
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/main/ipc/validation.unit.test.ts
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

node.exe : [90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
En C:\Users\david\AppData\Roaming\npm\pnpm.ps1: 24 Carácter: 5
+     & "node$exe"  "$basedir/node_modules/pnpm/bin/pnpm.cjs" $args
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([90mstderr[2m...sk successfully:String) [], 
    RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:337:22
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould start a single task successfully
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/ipc/handlers-utils.unit.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:352:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould throw error if task ID already exists
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:365:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:366:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-3. Active tasks: 3

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:367:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould execute multiple tasks in parallel up to limit
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:382:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/main/ipc/validation.unit.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 24[2mms[22m[39m
[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:383:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:401:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould forward message events to callbacks
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:416:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould forward message events to callbacks
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould forward progress events to callbacks
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:427:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould forward progress events to callbacks
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould cleanup task on completion and process queue
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:444:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould cleanup task on completion and process queue
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould cleanup task on error and process queue
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould queue tasks when at capacity
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (2). Queueing task task-3
[TaskManager] Task task-3 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mstartTask()[2m > [22m[2mshould throw error when queue is full
[22m[39m[TaskManager] At max concurrent tasks (1). Queueing task task-3

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward message events to callbacks
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould forward progress events to callbacks
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:462:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event 
Handling[2m > [22m[2mshould cleanup task on error and process queue
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:476:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:488:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on completion and process queue
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mTask Event Handling[2m > [22m[2mshould cleanup task on error and process queue
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a running task
[22m[39m[OpenCode CLI] Starting: opencode 
[TaskManager] Cancelling running task task-1
[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Cleaning up task task-1
[OpenCode Adapter] Disposing adapter for task task-1
[OpenCode Adapter] Adapter disposed
[TaskManager] Task task-1 cleaned up. Active tasks: 0
[TaskManager] Queue empty, no more tasks to process

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould cancel a queued task
[22m[39m[TaskManager] Cancelling queued task task-2

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould handle cancellation of non-existent task 
gracefully
[22m[39m[TaskManager] Task non-existent not found for cancellation

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:514:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.processQueue (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/TaskManager.ts:336:20)
    at TaskManager.cancelTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-co
re/src/internal/classes/TaskManager.ts:368:12)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:518:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

(node:16724) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 
data listeners added to [MockPty]. MaxListeners is 10. Use emitter.setMaxListeners() to 
increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
(node:16724) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 
exit listeners added to [MockPty]. MaxListeners is 10. Use emitter.setMaxListeners() to 
increase limit
[22m[39m[TaskManager] Cancelling running task task-1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[TaskManager] Cleaning up task task-1
[OpenCode Adapter] Disposing adapter for task task-1
[OpenCode Adapter] Adapter disposed
[TaskManager] Task task-1 cleaned up. Active tasks: 0
[TaskManager] Processing queue. Starting task task-2. Active: 0, Remaining in queue: 0
[TaskManager] Executing task task-2. Active tasks: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[TaskManager] Queue empty, no more tasks to process

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelTask()[2m > [22m[2mshould process queue after cancellation
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:532:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2minterruptTask()[2m > [22m[2mshould interrupt a running task
[22m[39m[OpenCode CLI] Starting: opencode 
[TaskManager] Interrupting task task-1
[OpenCode CLI] No active process to interrupt
[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2minterruptTask()[2m > [22m[2mshould handle interruption of non-existent task 
gracefully
[22m[39m[TaskManager] Task non-existent not found for interruption

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:551:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould remove task from queue and return true
[22m[39m[TaskManager] Removing task task-2 from queue

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:565:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mcancelQueuedTask()[2m > [22m[2mshould return false for non-queued task
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:579:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2msendResponse()[2m > [22m[2mshould attempt to send response to active task
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after 
adapter starts
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:604:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > 
[22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after 
adapter starts
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mgetSessionId()[2m > [22m[2mshould return session ID for active task after adapter starts
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould report hasRunningTask correctly
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:638:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould report hasRunningTask correctly
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould report hasRunningTask correctly
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:647:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:648:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return all active task IDs
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return first active task ID
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:662:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query 
Methods[2m > [22m[2mshould return first active task ID
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mState Query Methods[2m > [22m[2mshould return first active task ID
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould dispose all active tasks
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:687:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould dispose all active tasks
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould dispose all active tasks
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:688:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould dispose all active tasks
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould dispose all active tasks
[22m[39m[OpenCode CLI] Starting: opencode 
[TaskManager] Disposing all tasks (2 active, 0 queued)
[OpenCode Adapter] Disposing adapter for task task-1
[OpenCode Adapter] Adapter disposed
[OpenCode Adapter] Disposing adapter for task task-2
[OpenCode Adapter] Adapter disposed
[TaskManager] All tasks disposed
[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould clear the task queue
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:701:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m 
> [22m[2mshould clear the task queue
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (1). Queueing task task-2
[TaskManager] Task task-2 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mTaskManager Class[2m > [22m[2mdispose()[2m > [22m[2mshould clear the task queue
[22m[39m[TaskManager] Disposing all tasks (1 active, 1 queued)
[OpenCode Adapter] Disposing adapter for task task-1
[OpenCode Adapter] Adapter disposed
[TaskManager] All tasks disposed

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mSingleton Functions[2m > [22m[2mdisposeTaskManager()[2m > [22m[2mshould dispose singleton and allow recreation
[22m[39m[TaskManager] Disposing all tasks (0 active, 0 queued)
[TaskManager] All tasks disposed

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue 
tasks and track positions correctly
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:772:7
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue 
tasks and track positions correctly
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue 
tasks and track positions correctly
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:773:7
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue 
tasks and track positions correctly
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (2). Queueing task task-3
[TaskManager] Task task-3 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould queue tasks and track positions correctly
[22m[39m[TaskManager] At max concurrent tasks (2). Queueing task task-4
[TaskManager] Task task-4 queued. Queue length: 2

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[TaskManager] Executing task task-1. Active tasks: 1

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould 
maintain queue integrity during concurrent operations
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:787:7
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould 
maintain queue integrity during concurrent operations
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] Executing task task-2. Active tasks: 2

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould 
maintain queue integrity during concurrent operations
[22m[39m[LogWatcher] Error finding latest log: TypeError: Cannot read properties of 
undefined (reading 'readdir')
    at OpenCodeLogWatcher.findAndWatchLatestLog (C:/Users/david/Documents/GitHub/accomplish
/packages/agent-core/src/internal/classes/OpenCodeLogWatcher.ts:174:39)
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:132:16)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:29)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:23
    at TaskManager.executeTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-c
ore/src/internal/classes/TaskManager.ts:321:5)
    at TaskManager.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent-cor
e/src/internal/classes/TaskManager.ts:118:17)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/task-manager.unit.test.ts:788:7
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > 
[22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould 
maintain queue integrity during concurrent operations
[22m[39m[LogWatcher] Could not watch log directory: TypeError: 
__vite_ssr_import_1__.default.watch is not a function
    at OpenCodeLogWatcher.start (C:/Users/david/Documents/GitHub/accomplish/packages/agent-
core/src/internal/classes/OpenCodeLogWatcher.ts:139:25)
    at OpenCodeAdapter.startTask (C:/Users/david/Documents/GitHub/accomplish/packages/agent
-core/src/internal/classes/OpenCodeAdapter.ts:194:7)
    at C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/internal/classes/
TaskManager.ts:310:9

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[OpenCode CLI] Starting: opencode 

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[OpenCode CLI] Command: opencode
[OpenCode CLI] Args: 
[OpenCode CLI] Working directory: /mock/working-dir
[OpenCode CLI] PTY spawn: /bin/sh -c opencode
[OpenCode CLI] PTY Process PID: 12345
[TaskManager] At max concurrent tasks (2). Queueing task task-3
[TaskManager] Task task-3 queued. Queue length: 1

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[TaskManager] At max concurrent tasks (2). Queueing task task-4
[TaskManager] Task task-4 queued. Queue length: 2

[90mstdout[2m | __tests__/unit/main/opencode/task-manager.unit.test.ts[2m > [22m[2mTask Manager Module[2m > [22m[2mQueue Processing[2m > [22m[2mshould maintain queue integrity during concurrent operations
[22m[39m[TaskManager] Removing task task-3 from queue

 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/task-manager.unit.test.ts [2m([22m[2m35 tests[22m[2m)[22m[33m 5353[2mms[22m[39m
         [33m[2mÔ£ô[22m[39m should create task manager with default max concurrent tasks [33m 4835[2mms[22m[39m
[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return true when flow is started
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return true when flow is started
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false after flow completes
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2misInProgress()[2m > [22m[2mshould return false after flow completes
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould spawn PTY with auth login command
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould spawn PTY with auth login command
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select OpenAI provider when prompt detected
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select OpenAI provider when prompt detected
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select login method when prompt detected
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould auto-select login method when prompt detected
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould open OAuth URL in external browser
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould open OAuth URL in external browser
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould not open URL twice
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould not open URL twice
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould reject on non-zero exit code
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould reject on non-zero exit code
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould include exit code in error message
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould include exit code in error message
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mstart()[2m > [22m[2mshould cancel previous flow before starting new one
[22m[39m[OAuthBrowserFlow] Cancelling previous flow before starting new one
[OAuthBrowserFlow] Cancelling active OAuth flow

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should 
reject empty keys
[22m[39mIPC handler api-key:set failed Error: apiKey is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:460:26
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:544:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should 
reject empty keys
[22m[39mIPC handler api-key:set failed Error: apiKey is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:460:26
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:545:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Handlers[2m > [22m[2mapi-key:set should 
reject keys exceeding max length
[22m[39mIPC handler api-key:set failed Error: apiKey exceeds maximum length of 256
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:269:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:460:26
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:553:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould do nothing when no flow is active
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould do nothing when no flow is active
[22m[39m[OAuthBrowserFlow] No active flow to cancel

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSettings Handlers[2m > 
[22m[2msettings:set-debug-mode should reject non-boolean values
[22m[39mIPC handler settings:set-debug-mode failed Error: Invalid debug mode flag
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:930:13
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:587:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSettings Handlers[2m > 
[22m[2msettings:set-debug-mode should reject non-boolean values
[22m[39mIPC handler settings:set-debug-mode failed Error: Invalid debug mode flag
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:930:13
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:590:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSettings Handlers[2m > [22m[2msettings:add-api-key 
should reject unsupported providers
[22m[39mIPC handler settings:add-api-key failed Error: Unsupported API key provider
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:430:15
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:662:9
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:start should 
validate task config
[22m[39mIPC handler task:start failed Error: prompt is required
    at sanitizeString (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/u
tils/sanitize.ts:13:11)
    at validateTaskConfig (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/s
rc/utils/task-validation.ts:12:18)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:149:29
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:716:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:start should 
validate task config
[22m[39mIPC handler task:start failed Error: prompt is required
    at sanitizeString (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/u
tils/sanitize.ts:13:11)
    at validateTaskConfig (C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/s
rc/utils/task-validation.ts:12:18)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:149:29
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:717:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:cancel should cancel 
a running task
[22m[39mIPC handler task:cancel failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:222:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:726:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:cancel should cancel 
a queued task
[22m[39mIPC handler task:cancel failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:222:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:738:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:cancel should do 
nothing for non-existent task
[22m[39mIPC handler task:cancel failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:222:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:751:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:interrupt should 
interrupt a running task
[22m[39mIPC handler task:interrupt failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:228:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:764:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:get should return 
task from history
[22m[39mIPC handler task:get failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:233:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:782:28
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:get should return 
null for non-existent task
[22m[39mIPC handler task:get failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:233:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:798:28
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:list should return 
all tasks from history
[22m[39mIPC handler task:list failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:238:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:824:28
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:delete should remove 
task from history
[22m[39mIPC handler task:delete failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:243:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:842:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Handlers[2m > [22m[2mtask:clear-history should 
clear all tasks
[22m[39mIPC handler task:clear-history failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:248:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:869:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mPermission Handlers[2m > [22m[2mpermission:respond 
should skip response for inactive task
[22m[39m[IPC] Permission response for inactive task task_inactive

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject 
invalid model configuration
[22m[39mIPC handler model:set failed Error: Invalid model configuration
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:664:13
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1067:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject 
invalid model configuration
[22m[39mIPC handler model:set failed Error: Invalid model configuration
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:664:13
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1068:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mModel Handlers[2m > [22m[2mmodel:set should reject 
invalid model configuration
[22m[39mIPC handler model:set failed Error: Invalid model configuration
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:664:13
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1071:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject non-http/https protocols
[22m[39mFailed to open external URL: Error: External URL must use http or https protocol
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1106:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject non-http/https protocols
[22m[39mIPC handler shell:open-external failed Error: External URL must use http or 
https protocol
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1106:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject non-http/https protocols
[22m[39mFailed to open external URL: Error: External URL must use http or https protocol
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1109:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject non-http/https protocols
[22m[39mIPC handler shell:open-external failed Error: External URL must use http or 
https protocol
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:5:13)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1109:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject invalid URLs
[22m[39mFailed to open external URL: Error: External URL is not a valid URL
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:12:11)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1116:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mShell Handlers[2m > [22m[2mshell:open-external 
should reject invalid URLs
[22m[39mIPC handler shell:open-external failed Error: External URL is not a valid URL
    at validateHttpUrl 
(C:/Users/david/Documents/GitHub/accomplish/packages/agent-core/src/utils/url.ts:12:11)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:1013:7
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1116:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should 
validate session ID
[22m[39mIPC handler session:resume failed Error: sessionId is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:307:34
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1278:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should 
validate session ID
[22m[39mIPC handler session:resume failed Error: sessionId is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:307:34
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1279:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should 
validate prompt
[22m[39mIPC handler session:resume failed Error: prompt is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:308:31
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1284:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSession Handlers[2m > [22m[2msession:resume should 
validate prompt
[22m[39mIPC handler session:resume failed Error: prompt is required
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:266:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:308:31
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1285:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mTask Callbacks and Message Batching[2m > 
[22m[2mtask:interrupt should do nothing for inactive task
[22m[39mIPC handler task:interrupt failed Error: Daemon not bootstrapped. Call 
bootstrapDaemon() first.
    at getDaemonClient (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/da
emon-bootstrap.ts:303:15)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:228:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1492:13
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m
.pnpm[24m/@vitest+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10
)

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw 
error when window is destroyed
[22m[39mIPC handler task:start failed Error: Untrusted window
    at assertTrustedWindow 
(C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:107:11)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:147:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1637:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw 
error when window is null
[22m[39mIPC handler task:start failed Error: Untrusted window
    at assertTrustedWindow 
(C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:107:11)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:147:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1648:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mWindow Trust Validation[2m > [22m[2mshould throw 
error when IPC from non-focused window with multiple windows
[22m[39mIPC handler task:start failed Error: IPC request must originate from the focused 
window
    at assertTrustedWindow 
(C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:112:11)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:147:20
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:1676:20
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle abort error
[22m[39m[API Key] Validation requested for provider: anthropic

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > 
[22m[2mapi-key:validate should handle abort error
[22m[39m[API Key] Validation failed {
  error: [32m'Request timed out. Please check your internet connection and try 
again.'[39m
}

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should handle network errors
[22m[39m[API Key] Validation requested for provider: anthropic

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > 
[22m[2mapi-key:validate should handle network errors
[22m[39m[API Key] Validation failed {
  error: [32m'Failed to validate API key. Check your internet connection.'[39m
}

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return invalid for non-200 response
[22m[39m[API Key] Validation requested for provider: anthropic

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > 
[22m[2mapi-key:validate should return invalid for non-200 response
[22m[39m[API Key] Validation failed { error: [32m'Invalid API key'[39m }

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return valid for 200 response
[22m[39m[API Key] Validation requested for provider: anthropic

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mAPI Key Validation Timeout[2m > [22m[2mapi-key:validate should return valid for 200 response
[22m[39m[API Key] Validation succeeded

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should skip validation for custom provider
[22m[39m[API Key] Validation requested for provider: custom
[API Key] Skipping validation for custom (local/custom provider)

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate OpenAI key
[22m[39m[API Key] Validation requested for provider: openai

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate OpenAI key
[22m[39m[API Key] Validation succeeded for openai

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate Google key
[22m[39m[API Key] Validation requested for provider: google

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should validate Google key
[22m[39m[API Key] Validation succeeded for google

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle AbortError
[22m[39m[API Key] Validation requested for provider: openai

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > 
[22m[2mapi-key:validate-provider should handle AbortError
[22m[39m[API Key] Validation failed for openai {
  error: [32m'Request timed out. Please check your internet connection and try 
again.'[39m
}

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response with error message
[22m[39m[API Key] Validation requested for provider: openai

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > 
[22m[2mapi-key:validate-provider should handle failed response with error message
[22m[39m[API Key] Validation failed for openai { error: [32m'Access denied'[39m }

[90mstdout[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > [22m[2mapi-key:validate-provider should handle failed response without error message
[22m[39m[API Key] Validation requested for provider: openai

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mMulti-Provider API Key Validation[2m > 
[22m[2mapi-key:validate-provider should handle failed response without error message
[22m[39m[API Key] Validation failed for openai { error: [32m'API returned status 
500'[39m }

[90mstderr[2m | __tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22m[2mIPC 
Handlers Integration[2m > [22m[2mSettings Add API Key with Label[2m > 
[22m[2msettings:add-api-key should validate label length
[22m[39mIPC handler settings:add-api-key failed Error: label exceeds maximum length of 
128
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:269:15
    at Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m
/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:433:38
    at 
C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src/main/ipc/handlers.ts:132:20
    at invokeHandler (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/uni
t/main/ipc/handlers.unit.test.ts:395:10)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/ipc/hand
lers.unit.test.ts:2037:20
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)

 [31mÔØ»[39m [30m[42m unit [49m[39m __tests__/unit/main/ipc/handlers.unit.test.ts [2m([22m[2m88 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 210[2mms[22m[39m
       [32mÔ£ô[39m should register all expected IPC handlers[32m 7[2mms[22m[39m
       [32mÔ£ô[39m api-key:exists should return false when no key is stored[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-key:set should store the API key[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-key:get should retrieve the stored API key[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-key:clear should remove the stored API key[32m 3[2mms[22m[39m
       [32mÔ£ô[39m api-key:set should reject empty keys[32m 17[2mms[22m[39m
       [32mÔ£ô[39m api-key:set should reject keys exceeding max length[32m 2[2mms[22m[39m
       [32mÔ£ô[39m settings:debug-mode should return current debug mode[32m 1[2mms[22m[39m
       [32mÔ£ô[39m settings:set-debug-mode should update debug mode[32m 2[2mms[22m[39m
       [32mÔ£ô[39m settings:set-debug-mode should reject non-boolean values[32m 3[2mms[22m[39m
       [32mÔ£ô[39m settings:app-settings should return all app settings[32m 1[2mms[22m[39m
       [32mÔ£ô[39m settings:api-keys should return list of stored API keys[32m 3[2mms[22m[39m
       [32mÔ£ô[39m settings:add-api-key should store API key for valid provider[32m 1[2mms[22m[39m
       [32mÔ£ô[39m settings:add-api-key should reject unsupported providers[32m 2[2mms[22m[39m
       [32mÔ£ô[39m settings:remove-api-key should delete the API key[32m 2[2mms[22m[39m
       [32mÔ£ô[39m task:start should create and start a new task[32m 5[2mms[22m[39m
       [32mÔ£ô[39m task:start should validate task config[32m 8[2mms[22m[39m
[31m       [31m├ù[31m task:cancel should cancel a running task[39m[32m 3[2mms[22m[39m
[31m       [31m├ù[31m task:cancel should cancel a queued task[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:cancel should do nothing for non-existent task[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:interrupt should interrupt a running task[39m[32m 3[2mms[22m[39m
[31m       [31m├ù[31m task:get should return task from history[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:get should return null for non-existent task[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:list should return all tasks from history[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:delete should remove task from history[39m[32m 2[2mms[22m[39m
[31m       [31m├ù[31m task:clear-history should clear all tasks[39m[32m 2[2mms[22m[39m
       [32mÔ£ô[39m onboarding:complete should return false when not completed[32m 1[2mms[22m[39m
       [32mÔ£ô[39m onboarding:complete should return true when completed[32m 1[2mms[22m[39m
       [32mÔ£ô[39m onboarding:complete should return true if user has task history[32m 1[2mms[22m[39m
       [32mÔ£ô[39m onboarding:set-complete should update onboarding status[32m 1[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should send response for active task[32m 3[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should send custom message when provided[32m 1[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should send "no" for denied decisions[32m 1[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should resolve file permission requests[32m 2[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should skip response for inactive task[32m 2[2mms[22m[39m
       [32mÔ£ô[39m model:get should return selected model[32m 1[2mms[22m[39m
       [32mÔ£ô[39m model:get should return null when no model selected[32m 6[2mms[22m[39m
       [32mÔ£ô[39m model:set should update selected model[32m 2[2mms[22m[39m
       [32mÔ£ô[39m model:set should reject invalid model configuration[32m 4[2mms[22m[39m
       [32mÔ£ô[39m shell:open-external should open valid http URL[32m 1[2mms[22m[39m
       [32mÔ£ô[39m shell:open-external should open valid https URL[32m 1[2mms[22m[39m
       [32mÔ£ô[39m shell:open-external should reject non-http/https protocols[32m 3[2mms[22m[39m
       [32mÔ£ô[39m shell:open-external should reject invalid URLs[32m 2[2mms[22m[39m
       [32mÔ£ô[39m opencode:check should return CLI status[32m 1[2mms[22m[39m
       [32mÔ£ô[39m opencode:version should return CLI version[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-keys:all should return masked keys for all providers[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-keys:has-any should return true when any key exists[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-keys:has-any should return false when no keys exist[32m 1[2mms[22m[39m
       [32mÔ£ô[39m session:resume should start a new task with session ID[32m 2[2mms[22m[39m
       [32mÔ£ô[39m session:resume should use existing task ID when provided[32m 1[2mms[22m[39m
       [32mÔ£ô[39m session:resume should validate session ID[32m 3[2mms[22m[39m
       [32mÔ£ô[39m session:resume should validate prompt[32m 4[2mms[22m[39m
       [32mÔ£ô[39m log:event should return ok response[32m 1[2mms[22m[39m
       [32mÔ£ô[39m task:start should initialize permission API on first call[32m 4[2mms[22m[39m
       [32mÔ£ô[39m task:start should only initialize permission API once[32m 2[2mms[22m[39m
       [32mÔ£ô[39m task:start should create initial user message[32m 2[2mms[22m[39m
       [32mÔ£ô[39m task:start should save task to history[32m 2[2mms[22m[39m
       [32mÔ£ô[39m task:start should validate all optional config fields[32m 3[2mms[22m[39m
       [32mÔ£ô[39m task:start should truncate allowedTools array to 20 items[32m 2[2mms[22m[39m
       [32mÔ£ô[39m task:cancel should do nothing when taskId is undefined[32m 1[2mms[22m[39m
       [32mÔ£ô[39m task:interrupt should do nothing when taskId is undefined[32m 1[2mms[22m[39m
[31m       [31m├ù[31m task:interrupt should do nothing for inactive task[39m[32m 2[2mms[22m[39m
       [32mÔ£ô[39m session:resume should add user message to existing task[32m 1[2mms[22m[39m
       [32mÔ£ô[39m session:resume should update task status in history[32m 1[2mms[22m[39m
       [32mÔ£ô[39m session:resume should not add message when no existing task ID[32m 2[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should use selectedOptions when provided[32m 2[2mms[22m[39m
       [32mÔ£ô[39m permission:respond should log when file permission not found[32m 2[2mms[22m[39m
       [32mÔ£ô[39m should throw error when window is destroyed[32m 3[2mms[22m[39m
       [32mÔ£ô[39m should throw error when window is null[32m 2[2mms[22m[39m
       [32mÔ£ô[39m should throw error when IPC from non-focused window with multiple windows[32m 3[2mms[22m[39m
       [32mÔ£ô[39m should allow IPC when only one window exists[32m 1[2mms[22m[39m
       [32mÔ£ô[39m onboarding:complete should return true when E2E_SKIP_AUTH env is set[32m 1[2mms[22m[39m
       [32mÔ£ô[39m opencode:check should return mock status when E2E_SKIP_AUTH is set[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate should handle abort error[32m 8[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate should handle network errors[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate should return invalid for non-200 response[32m 3[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate should return valid for 200 response[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should reject unsupported provider[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should skip validation for custom provider[32m 1[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should validate OpenAI key[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should validate Google key[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should handle AbortError[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should handle failed response with error message[32m 2[2mms[22m[39m
       [32mÔ£ô[39m api-key:validate-provider should handle failed response without error message[32m 2[2mms[22m[39m
       [32mÔ£ô[39m settings:add-api-key should accept and return custom label[32m 1[2mms[22m[39m
       [32mÔ£ô[39m settings:add-api-key should use default label when not provided[32m 1[2mms[22m[39m
       [32mÔ£ô[39m settings:add-api-key should validate label length[32m 5[2mms[22m[39m
       [32mÔ£ô[39m settings:api-keys should handle empty password[32m 2[2mms[22m[39m
[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[OAuthBrowserFlow] Port 1455 released

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Ctrl+C to PTY
[22m[39m[OAuthBrowserFlow] Force killing after graceful timeout

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
[22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould send Y confirmation on Windows
[22m[39m[OAuthBrowserFlow] Force killing after graceful timeout

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
[22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould force kill if graceful exit times out
[22m[39m[OAuthBrowserFlow] Force killing after graceful timeout

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould clear activePty after cancel
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mcancel()[2m > [22m[2mshould clear activePty after cancel
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould kill active PTY
[22m[39m[OAuthBrowserFlow] Disposing

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould be idempotent
[22m[39m[OAuthBrowserFlow] Disposing

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould not throw when no active PTY
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mdispose()[2m > [22m[2mshould not throw when no active PTY
[22m[39m[OAuthBrowserFlow] Disposing

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mconvenience exports[2m > [22m[2mshould export loginOpenAiWithChatGpt function
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2mconvenience exports[2m > [22m[2mshould export oauthBrowserFlow singleton
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
[22m[39m[OAuthBrowserFlow] Cancelling active OAuth flow

[90mstderr[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > 
[22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY 
kill errors during cancel gracefully
[22m[39m[OAuthBrowserFlow] Error during force kill: Error: Kill failed
    at MockPty.<anonymous> (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests
__/unit/main/opencode/auth-browser.unit.test.ts:450:15)
    at MockPty.Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.p
npm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at OAuthBrowserFlow.cancel (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/src
/main/opencode/auth-browser.ts:154:20)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/auth-browser.unit.test.ts:454:7
    at file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.pnpm[24m/@vite
st+runner@4.0.17/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during cancel gracefully
[22m[39m[OAuthBrowserFlow] Force killing after graceful timeout

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

[90mstderr[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > 
[22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY 
kill errors during dispose gracefully
[22m[39m[OAuthBrowserFlow] Error killing PTY during dispose: Error: Kill failed
    at MockPty.<anonymous> (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests
__/unit/main/opencode/auth-browser.unit.test.ts:465:15)
    at MockPty.Mock (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/[4m.p
npm[24m/@vitest+spy@4.0.17/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
    at OAuthBrowserFlow.dispose (C:/Users/david/Documents/GitHub/accomplish/apps/desktop/sr
c/main/opencode/auth-browser.ts:171:24)
    at C:/Users/david/Documents/GitHub/accomplish/apps/desktop/__tests__/unit/main/opencode
/auth-browser.unit.test.ts:469:37
    at Proxy.assertThrows (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/
[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:2798:5)
    at Proxy.methodWrapper (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules
/[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:1700:25)
    at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/
[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1149
:12)
    at Proxy.overwritingMethodWrapper (file:///C:/Users/david/Documents/GitHub/accomplish/n
ode_modules/[4m.pnpm[24m/chai@6.2.2/node_modules/[4mchai[24m/index.js:1750:33)
    at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/
[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1485
:16)
    at Proxy.<anonymous> (file:///C:/Users/david/Documents/GitHub/accomplish/node_modules/
[4m.pnpm[24m/@vitest+expect@4.0.17/node_modules/[4m@vitest/expect[24m/dist/index.js:1090
:14)

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould handle PTY kill errors during dispose gracefully
[22m[39m[OAuthBrowserFlow] Disposing

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould redact sensitive data in error messages
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/unit/main/opencode/auth-browser.unit.test.ts[2m > [22m[2mOAuthBrowserFlow[2m > [22m[2merror scenarios[2m > [22m[2mshould redact sensitive data in error messages
[22m[39m[CLI Resolver] Using local OpenCode CLI executable: \mock\app\path\node_modules\opencode-windows-x64\bin\opencode.exe

 [32mÔ£ô[39m [30m[42m unit [49m[39m __tests__/unit/main/opencode/auth-browser.unit.test.ts [2m([22m[2m24 tests[22m[2m)[22m[33m 10365[2mms[22m[39m
       [33m[2mÔ£ô[22m[39m should return false when no flow is active [33m 6593[2mms[22m[39m
       [33m[2mÔ£ô[22m[39m should send Ctrl+C to PTY [33m 1138[2mms[22m[39m
       [33m[2mÔ£ô[22m[39m should send Y confirmation on Windows [33m 1126[2mms[22m[39m
       [33m[2mÔ£ô[22m[39m should handle PTY kill errors during cancel gracefully [33m 1123[2mms[22m[39m

[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[39m[1m[41m Failed Tests 10 
[49m[22m[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:cancel should cancel a running task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m222:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m726:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[1/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:cancel should cancel a queued task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m222:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m738:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[2/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:cancel should do nothing for non-existent task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m222:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m751:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[3/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:interrupt should interrupt a running task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m228:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m764:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[4/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:get should return task from history
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m233:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m782:28[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[5/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:get should return null for non-existent task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m233:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m798:28[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[6/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:list should return all tasks from history
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m238:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m824:28[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[7/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:delete should remove task from history
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m243:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m842:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[8/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Handlers[2m > [22mtask:clear-history should clear all tasks
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m248:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m869:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[9/10]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[42m unit [49m[39m 
__tests__/unit/main/ipc/handlers.unit.test.ts[2m > [22mIPC Handlers Integration[2m > 
[22mTask Callbacks and Message Batching[2m > [22mtask:interrupt should do nothing for 
inactive task
[31m[1mError[22m: Daemon not bootstrapped. Call bootstrapDaemon() first.[39m
[36m [2mÔØ»[22m getDaemonClient src/main/daemon-bootstrap.ts:[2m303:15[22m[39m
    [90m301| [39m[35mexport[39m [35mfunction[39m 
[34mgetDaemonClient[39m()[33m:[39m [33mDaemonClient[39m {
    [90m302| [39m    [35mif[39m ([33m![39mclient) {
    [90m303| [39m        throw new Error('Daemon not bootstrapped. Call 
bootstrapDaemonÔÇª
    [90m   | [39m              [31m^[39m
    [90m304| [39m    }
    [90m305| [39m    [35mreturn[39m client[33m;[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m228:20[22m[39m
[90m [2mÔØ»[22m src/main/ipc/handlers.ts:[2m132:20[22m[39m
[90m [2mÔØ»[22m invokeHandler 
__tests__/unit/main/ipc/handlers.unit.test.ts:[2m395:10[22m[39m
[90m [2mÔØ»[22m __tests__/unit/main/ipc/handlers.unit.test.ts:[2m1492:13[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[10/10]ÔÄ»[22m
[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (7)[39m
[2m      Tests [22m [1m[31m10 failed[39m[22m[2m | [22m[1m[32m298 passed[39m[22m[90m (308)[39m
[2m   Start at [22m 02:55:24
[2m   Duration [22m 11.40s[2m (transform 8.12s, setup 469ms, import 18.62s, tests 16.31s, environment 1ms)[22m

C:\Users\david\Documents\GitHub\accomplish\apps\desktop:
ÔÇëERR_PNPM_RECURSIVE_RUN_FIRST_FAILÔÇë @accomplish/desktop@0.3.8 test:unit: `vitest run --config vitest.unit.config.ts`
Exit status 1
