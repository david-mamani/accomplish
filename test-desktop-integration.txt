
> @accomplish/desktop@0.3.8 test:integration C:\Users\david\Documents\GitHub\accomplish\apps\desktop
> vitest run --config vitest.integration.config.ts


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/david/Documents/GitHub/accomplish/apps/desktop[39m

 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/main/taskHistory.integration.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 68[2mms[22m[39m
 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/preload/preload.integration.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 75[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould create config directory if it does not exist
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-oeJzDY\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-2Lh4pT

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould create config directory if it does not exist
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-2Lh4pT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-2Lh4pT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-2Lh4pT\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould not recreate directory if it already exists
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-O3ez3n\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-1IaUi2

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould not recreate directory if it already exists
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-1IaUi2\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-1IaUi2\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-1IaUi2\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould write config file with correct structure
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-6VaaG1\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7W2Rij

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould write config file with correct structure
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7W2Rij\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7W2Rij\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7W2Rij\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include accomplish agent configuration
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-GXggzC\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7lRssb

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include accomplish agent configuration
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7lRssb\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7lRssb\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-7lRssb\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include MCP server configuration for file-permission
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-xOjrF9\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-osf9jB

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include MCP server configuration for file-permission
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-osf9jB\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-osf9jB\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-osf9jB\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include platform-specific environment instructions
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-Zjrd6U\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-SQTeup

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould include platform-specific environment instructions
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-SQTeup\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-SQTeup\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-SQTeup\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould set OPENCODE_CONFIG environment variable after generation
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-dXa9Nt\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-d6E7PA

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould set OPENCODE_CONFIG environment variable after generation
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-d6E7PA\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-d6E7PA\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-d6E7PA\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould return the config file path
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-cRtcf7\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-05A0kS

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mgenerateOpenCodeConfig()[2m > [22m[2mshould return the config file path
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-05A0kS\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-05A0kS\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-05A0kS\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include browser automation guidance
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-GH1Wa5\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-i1jRNx

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include browser automation guidance
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-i1jRNx\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-i1jRNx\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-i1jRNx\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include file permission rules
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-WqgTIW\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-3mesPn

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include file permission rules
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-3mesPn\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-3mesPn\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-3mesPn\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include user communication guidance
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-4NlyH2\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-lor9lK

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mSystem Prompt Content[2m > [22m[2mshould include user communication guidance
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-lor9lK\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-lor9lK\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-lor9lK\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould overwrite existing config file on regeneration
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-gyG8ng\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould overwrite existing config file on regeneration
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould overwrite existing config file on regeneration
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-gyG8ng\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould overwrite existing config file on regeneration
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-e2agaT\opencode

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould create valid JSON that can be parsed
[22m[39m[OpenCode Config] MCP tools path: C:\Users\david\AppData\Local\Temp\opencode-config-test-monorepo-hIxj3h\packages\agent-core\mcp-tools
[OpenCode Config] User data path: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-Jw2RNR

[90mstdout[2m | __tests__/integration/main/opencode/config-generator.integration.test.ts[2m > [22m[2mOpenCode Config Generator Integration[2m > [22m[2mConfig File Persistence[2m > [22m[2mshould create valid JSON that can be parsed
[22m[39m[OpenCode Config] Generated config at: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-Jw2RNR\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-Jw2RNR\opencode\opencode.json
[OpenCode Config] OPENCODE_CONFIG_DIR env set to: C:\Users\david\AppData\Local\Temp\opencode-config-test-userData-Jw2RNR\opencode

 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/main/opencode/config-generator.integration.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 777[2mms[22m[39m
         [33m[2mÔ£ô[22m[39m should return skills path relative to app path in dev mode [33m 577[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mDevelopment Mode[2m > [22m[2mshould return null in development mode
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould store and retrieve an API key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mNon-macOS Platforms[2m > [22m[2mshould return base PATH unchanged on Linux
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/permission-api.integration.test.ts
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22m[2mOpenCode CLI Path Module[2m > [22m[2mgetOpenCodeCliPath()[2m > [22m[2mDevelopment Mode[2m > [22m[2mshould return nvm OpenCode path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mNon-macOS Platforms[2m > [22m[2mshould return base PATH unchanged on Linux
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - macOS (darwin)[2m > [22m[2mshould return correct paths for arm64 architecture
[22m[39m[agent-core] u2d sync test

 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/main/permission-api.integration.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mNon-macOS Platforms[2m > [22m[2mshould return base PATH unchanged on Windows
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - macOS (darwin)[2m > [22m[2mshould return correct paths for arm64 architecture
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mNon-macOS Platforms[2m > [22m[2mshould return base PATH unchanged on Windows
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - macOS (darwin)[2m > [22m[2mshould return correct paths for x64 architecture
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include common Node.js paths
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - macOS (darwin)[2m > [22m[2mshould return correct paths for x64 architecture
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include common Node.js paths
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - Windows (win32)[2m > [22m[2mshould return correct paths for Windows
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include NVM paths when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetBundledNodePaths()[2m > [22m[2mPackaged Mode - Windows (win32)[2m > [22m[2mshould return correct paths for Windows
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include NVM paths when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2misBundledNodeAvailable()[2m > [22m[2mshould return false in development mode
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2misBundledNodeAvailable()[2m > [22m[2mshould return true when bundled node exists
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include fnm paths when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2misBundledNodeAvailable()[2m > [22m[2mshould return true when bundled node exists
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2misBundledNodeAvailable()[2m > [22m[2mshould return false when bundled node does not exist
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2misBundledNodeAvailable()[2m > [22m[2mshould return false when bundled node does not exist
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include fnm paths when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNodePath()[2m > [22m[2mshould return "node" in development mode
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould sort NVM versions with newest first
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNodePath()[2m > [22m[2mshould return bundled node path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould sort NVM versions with newest first
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNodePath()[2m > [22m[2mshould return bundled node path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include path_helper output
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNodePath()[2m > [22m[2mshould fallback to "node" when bundled not found in packaged app
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include path_helper output
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNodePath()[2m > [22m[2mshould fallback to "node" when bundled not found in packaged app
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould handle path_helper failure gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpmPath()[2m > [22m[2mshould return "npm" in development mode
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould handle path_helper failure gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpmPath()[2m > [22m[2mshould return bundled npm path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould deduplicate paths
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpmPath()[2m > [22m[2mshould return bundled npm path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould deduplicate paths
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould return null for non-existent provider
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpmPath()[2m > [22m[2mshould fallback to "npm" when bundled not found
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould use process.env.PATH as default base
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpmPath()[2m > [22m[2mshould fallback to "npm" when bundled not found
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould use process.env.PATH as default base
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould encrypt the API key in storage
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpxPath()[2m > [22m[2mshould return "npx" in development mode
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include Volta path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpxPath()[2m > [22m[2mshould return bundled npx path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include Volta path when available
[22m[39m[agent-core] u2d sync test

 [31mÔØ»[39m [30m[45m integration [49m[39m __tests__/integration/main/opencode/cli-path.integration.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[33m 2821[2mms[22m[39m
[31m         [31m├ù[31m should return nvm OpenCode path when available[39m[33m 2715[2mms[22m[39m
[31m         [31m├ù[31m should return global npm OpenCode path when nvm not available[39m[32m 5[2mms[22m[39m
[31m         [31m├ù[31m should return Homebrew OpenCode path on Apple Silicon[39m[32m 5[2mms[22m[39m
[31m         [31m├ù[31m should return bundled CLI path in node_modules when global not found[39m[32m 5[2mms[22m[39m
         [32mÔ£ô[39m should throw when no OpenCode CLI path can be resolved[32m 7[2mms[22m[39m
[31m         [31m├ù[31m should return unpacked asar path when packaged[39m[32m 7[2mms[22m[39m
         [32mÔ£ô[39m should throw when bundled CLI is missing in packaged app[32m 6[2mms[22m[39m
[31m         [31m├ù[31m should return true when nvm OpenCode is available[39m[32m 12[2mms[22m[39m
[31m         [31m├ù[31m should return true when bundled CLI exists in node_modules[39m[32m 4[2mms[22m[39m
[31m         [31m├ù[31m should return true when opencode is available on PATH[39m[32m 5[2mms[22m[39m
         [32mÔ£ô[39m should return false when no CLI is found anywhere[32m 5[2mms[22m[39m
[31m         [31m├ù[31m should return true when bundled CLI exists in unpacked asar[39m[32m 5[2mms[22m[39m
         [32mÔ£ô[39m should return false when bundled CLI missing in unpacked asar[32m 5[2mms[22m[39m
[31m         [31m├ù[31m should read version from package.json in unpacked asar[39m[32m 5[2mms[22m[39m
         [32mÔ£ô[39m should return null when package.json not found[32m 3[2mms[22m[39m
[31m         [31m├ù[31m should execute CLI with --version flag and parse output[39m[32m 5[2mms[22m[39m
[31m         [31m├ù[31m should parse version from simple version string[39m[32m 4[2mms[22m[39m
         [32mÔ£ô[39m should return null when version command fails[32m 4[2mms[22m[39m
[31m       [31m├ù[31m should scan multiple nvm versions and return first found[39m[32m 4[2mms[22m[39m
       [32mÔ£ô[39m should handle missing nvm directory gracefully[32m 6[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpxPath()[2m > [22m[2mshould return bundled npx path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include asdf shims path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpxPath()[2m > [22m[2mshould fallback to "npx" when bundled not found
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mgetExtendedNodePath()[2m > [22m[2mmacOS Platform[2m > [22m[2mshould include asdf shims path when available
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mgetNpxPath()[2m > [22m[2mshould fallback to "npx" when bundled not found
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould find executable command in PATH
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mlogBundledNodeInfo()[2m > [22m[2mshould log development mode message when not packaged
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould overwrite existing key for same provider
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould return null when command not found
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mlogBundledNodeInfo()[2m > [22m[2mshould log bundled node configuration when packaged
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould skip non-file entries
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mlogBundledNodeInfo()[2m > [22m[2mshould log bundled node configuration when packaged
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould skip non-executable files
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mBundledNodePaths Interface[2m > [22m[2mshould return all required path properties
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould search directories in order
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/bundled-node.integration.test.ts[2m > [22m[2mBundled Node.js Utilities[2m > [22m[2mBundledNodePaths Interface[2m > [22m[2mshould return all required path properties
[22m[39m[agent-core] u2d sync test

 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/main/utils/bundled-node.integration.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 2893[2mms[22m[39m
         [33m[2mÔ£ô[22m[39m should return null in development mode [33m 2372[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould handle empty path segments
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould handle directory access errors gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mfindCommandInPath()[2m > [22m[2mshould handle statSync errors gracefully
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould handle special characters in API key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mPath Priority Order[2m > [22m[2mshould prioritize version manager paths over system paths
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/utils/system-path.integration.test.ts[2m > [22m[2mSystem PATH Utilities[2m > [22m[2mPath Priority Order[2m > [22m[2mshould prioritize version manager paths over system paths
[22m[39m[agent-core] u2d sync test

 [31mÔØ»[39m [30m[45m integration [49m[39m __tests__/integration/main/utils/system-path.integration.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 3029[2mms[22m[39m
         [33m[2mÔ£ô[22m[39m should return base PATH unchanged on Linux [33m 2447[2mms[22m[39m
         [32mÔ£ô[39m should return base PATH unchanged on Windows[32m 39[2mms[22m[39m
         [32mÔ£ô[39m should include common Node.js paths[32m 35[2mms[22m[39m
[31m         [31m├ù[31m should include NVM paths when available[39m[32m 42[2mms[22m[39m
[31m         [31m├ù[31m should include fnm paths when available[39m[32m 95[2mms[22m[39m
[31m         [31m├ù[31m should sort NVM versions with newest first[39m[32m 30[2mms[22m[39m
         [32mÔ£ô[39m should include path_helper output[32m 39[2mms[22m[39m
         [32mÔ£ô[39m should handle path_helper failure gracefully[32m 28[2mms[22m[39m
         [32mÔ£ô[39m should deduplicate paths[32m 30[2mms[22m[39m
         [32mÔ£ô[39m should use process.env.PATH as default base[32m 27[2mms[22m[39m
         [32mÔ£ô[39m should include Volta path when available[32m 28[2mms[22m[39m
         [32mÔ£ô[39m should include asdf shims path when available[32m 28[2mms[22m[39m
[31m       [31m├ù[31m should find executable command in PATH[39m[32m 14[2mms[22m[39m
       [32mÔ£ô[39m should return null when command not found[32m 19[2mms[22m[39m
       [32mÔ£ô[39m should skip non-file entries[32m 14[2mms[22m[39m
[31m       [31m├ù[31m should skip non-executable files[39m[32m 15[2mms[22m[39m
[31m       [31m├ù[31m should search directories in order[39m[32m 12[2mms[22m[39m
[31m       [31m├ù[31m should handle empty path segments[39m[32m 15[2mms[22m[39m
[31m       [31m├ù[31m should handle directory access errors gracefully[39m[32m 25[2mms[22m[39m
[31m       [31m├ù[31m should handle statSync errors gracefully[39m[32m 16[2mms[22m[39m
       [32mÔ£ô[39m should prioritize version manager paths over system paths[32m 32[2mms[22m[39m
[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould handle very long API keys
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mstoreApiKey and getApiKey[2m > [22m[2mshould handle empty string as API key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mmultiple providers[2m > [22m[2mshould store API keys for different providers independently
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mmultiple providers[2m > [22m[2mshould not affect other providers when updating one
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mdeleteApiKey[2m > [22m[2mshould remove only the target provider key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mdeleteApiKey[2m > [22m[2mshould return false when deleting non-existent key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mdeleteApiKey[2m > [22m[2mshould allow re-storing after deletion
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mgetAllApiKeys[2m > [22m[2mshould return all null for empty store
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mgetAllApiKeys[2m > [22m[2mshould return all stored API keys
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mgetAllApiKeys[2m > [22m[2mshould return partial results when some providers are set
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mhasAnyApiKey[2m > [22m[2mshould return false when no keys are stored
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mhasAnyApiKey[2m > [22m[2mshould return true when at least one key is stored
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mhasAnyApiKey[2m > [22m[2mshould return true when multiple keys are stored
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mhasAnyApiKey[2m > [22m[2mshould return false after all keys are deleted
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mclearSecureStorage[2m > [22m[2mshould remove all stored API keys
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mclearSecureStorage[2m > [22m[2mshould allow storing new keys after clear
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mclearSecureStorage[2m > [22m[2mshould reset salt and derived key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mencryption consistency[2m > [22m[2mshould decrypt values correctly after module reload
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mencryption consistency[2m > [22m[2mshould decrypt values correctly after module reload
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mencryption consistency[2m > [22m[2mshould maintain encryption across multiple store/retrieve cycles
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2mencryption consistency[2m > [22m[2mshould use unique IV for each encryption
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2medge cases[2m > [22m[2mshould handle unicode characters in API key
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2medge cases[2m > [22m[2mshould handle rapid successive stores
[22m[39m[agent-core] u2d sync test

[90mstdout[2m | __tests__/integration/main/secureStorage.integration.test.ts[2m > [22m[2msecureStorage Integration[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent operations on different providers
[22m[39m[agent-core] u2d sync test

 [32mÔ£ô[39m [30m[45m integration [49m[39m __tests__/integration/main/secureStorage.integration.test.ts [2m([22m[2m28 tests[22m[2m)[22m[33m 4355[2mms[22m[39m
       [33m[2mÔ£ô[22m[39m should store and retrieve an API key [33m 2757[2mms[22m[39m
node.exe : 
En C:\Users\david\AppData\Roaming\npm\pnpm.ps1: 24 Carácter: 5
+     & "node$exe"  "$basedir/node_modules/pnpm/bin/pnpm.cjs" $args
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[39m[1m[41m Failed Tests 22 
[49m[22m[31mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetOpenCodeCliPath()[2m > [22mDevelopment Mode[2m > [22mshould 
return nvm OpenCode path when available
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m100:24[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[1/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetOpenCodeCliPath()[2m > [22mDevelopment Mode[2m > [22mshould 
return global npm OpenCode path when nvm not available
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m120:24[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[2/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetOpenCodeCliPath()[2m > [22mDevelopment Mode[2m > [22mshould 
return Homebrew OpenCode path on Apple Silicon
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m140:24[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[3/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetOpenCodeCliPath()[2m > [22mDevelopment Mode[2m > [22mshould 
return bundled CLI path in node_modules when global not found
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m162:24[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[4/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetOpenCodeCliPath()[2m > [22mPackaged Mode[2m > [22mshould 
return unpacked asar path when packaged
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m219:24[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[5/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22misOpenCodeBundled()[2m > [22mDevelopment Mode[2m > [22mshould 
return true when nvm OpenCode is available
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m269:24[22m[39m
    [90m267| [39m
    [90m268| [39m        [90m// Assert[39m
    [90m269| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m270| [39m      })[33m;[39m
    [90m271| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[6/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22misOpenCodeBundled()[2m > [22mDevelopment Mode[2m > [22mshould 
return true when bundled CLI exists in node_modules
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m290:24[22m[39m
    [90m288| [39m
    [90m289| [39m        [90m// Assert[39m
    [90m290| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m291| [39m      })[33m;[39m
    [90m292| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[7/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22misOpenCodeBundled()[2m > [22mDevelopment Mode[2m > [22mshould 
return true when opencode is available on PATH
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m305:24[22m[39m
    [90m303| [39m
    [90m304| [39m        [90m// Assert[39m
    [90m305| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m306| [39m      })[33m;[39m
    [90m307| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[8/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22misOpenCodeBundled()[2m > [22mPackaged Mode[2m > [22mshould 
return true when bundled CLI exists in unpacked asar
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m362:24[22m[39m
    [90m360| [39m
    [90m361| [39m        [90m// Assert[39m
    [90m362| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m363| [39m      })[33m;[39m
    [90m364| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[9/22]ÔÄ»[22
m[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetBundledOpenCodeVersion()[2m > [22mPackaged Mode[2m > 
[22mshould read version from package.json in unpacked asar
[31m[1mAssertionError[22m: expected null to be '1.2.3' // Object.is equality[39m

[32m- Expected:[39m 
"1.2.3"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m415:24[22m[39m
    [90m413| [39m
    [90m414| [39m        [90m// Assert[39m
    [90m415| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([32m'1.2.3'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m416| [39m      })[33m;[39m
    [90m417| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[10/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetBundledOpenCodeVersion()[2m > [22mDevelopment Mode[2m > 
[22mshould execute CLI with --version flag and parse output
[31m[1mAssertionError[22m: expected null to be '1.5.0' // Object.is equality[39m

[32m- Expected:[39m 
"1.5.0"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m455:24[22m[39m
    [90m453| [39m
    [90m454| [39m        [90m// Assert[39m
    [90m455| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([32m'1.5.0'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m456| [39m      })[33m;[39m
    [90m457| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[11/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mgetBundledOpenCodeVersion()[2m > [22mDevelopment Mode[2m > 
[22mshould parse version from simple version string
[31m[1mAssertionError[22m: expected null to be '2.0.1' // Object.is equality[39m

[32m- Expected:[39m 
"2.0.1"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m477:24[22m[39m
    [90m475| [39m
    [90m476| [39m        [90m// Assert[39m
    [90m477| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m([32m'2.0.1'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m478| [39m      })[33m;[39m
    [90m479| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[12/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/opencode/cli-path.integration.test.ts[2m > [22mOpenCode CLI 
Path Module[2m > [22mNVM Path Scanning[2m > [22mshould scan multiple nvm versions and 
return first found
[31m[1mError[22m: [CLI Path] OpenCode CLI executable not found. Reinstall dependencies 
to restore platform binaries.[39m
[36m [2mÔØ»[22m getOpenCodeCliPath 
src/main/opencode/electron-options.ts:[2m66:9[22m[39m
    [90m 64| [39m    [35mreturn[39m { command[33m:[39m 
resolved[33m.[39mcliPath[33m,[39m args[33m:[39m [] }[33m;[39m
    [90m 65| [39m  }
    [90m 66| [39m  [35mthrow[39m [35mnew[39m [33mError[39m(
    [90m   | [39m        [31m^[39m
    [90m 67| [39m    '[CLI Path] OpenCode CLI executable not found. Reinstall 
dependencÔÇª
    [90m 68| [39m  )[33m;[39m
[90m [2mÔØ»[22m 
__tests__/integration/main/opencode/cli-path.integration.test.ts:[2m527:22[22m[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[13/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mgetExtendedNodePath()[2m > [22mmacOS Platform[2m > [22mshould 
include NVM paths when available
[31m[1mAssertionError[22m: expected '/usr/bin:C:\Users\david\Documents\GitÔÇª' to 
contain '/Users/testuser/.nvm/versions/node/v2ÔÇª'[39m

Expected: [32m"/[7mUsers/testuser/.nvm/versions/node/v20.10.0/bin[27m"[39m
Received: [31m"/[7musr/bin:C:\Users\david\Documents\GitHub\accomplish\apps\desktop\node_m
odules\.bin;C:\Users\david\AppData\Local\pnpm\.tools\pnpm\9.15.0_tmp_23220\node_modules\pnp
m\dist\node-gyp-bin;C:\Users\david\Documents\GitHub\accomplish\node_modules\.bin;C:\Users\d
avid\AppData\Local\pnpm\.tools\pnpm\9.15.0\bin;C:\Program Files\Microsoft\jdk-21.0.9.10-hot
spot\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\Window
sPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files (x86)\NVIDIA 
Corporation\PhysX\Common;C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR;C:\WINDOWS\syst
em32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WIN
DOWS\System32\OpenSSH\;C:\Program Files (x86)\Windows Kits\10\Windows Performance 
Toolkit\;C:\Program Files\nodejs\;C:\Program Files\Docker\Docker\resources\bin;C:\Program F
iles\Git\cmd;C:\Users\david\.cargo\bin;C:\Users\david\.local\bin;C:\Users\david\AppData\Loc
al\Microsoft\WindowsApps;C:\Users\david\AppData\Local\Programs\Antigravity\bin;C:\Users\dav
id\AppData\Local\Python\bin;C:\Users\david\AppData\Local\Programs\Microsoft VS Code\bin;C:\
Users\david\DevTools\Maven\bin;C:\Users\david\AppData\Roaming\npm;C:\Users\david\AppData\Ro
aming\Python\Scripts;C:\Users\david\AppData\Local\Programs\Ollama[27m"[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m153:24[22m[39m
    [90m151| [39m
    [90m152| [39m        [90m// Assert[39m
    [90m153| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoContain[39m(nvmPath)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m154| [39m      })[33m;[39m
    [90m155| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[14/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mgetExtendedNodePath()[2m > [22mmacOS Platform[2m > [22mshould 
include fnm paths when available
[31m[1mAssertionError[22m: expected '/usr/bin:C:\Users\david\Documents\GitÔÇª' to 
contain '/Users/testuser/.fnm/node-versions/v2ÔÇª'[39m

Expected: [32m"/[7mUsers/testuser/.fnm/node-versions/v20.10.0/installation/bin[27m"[39m
Received: [31m"/[7musr/bin:C:\Users\david\Documents\GitHub\accomplish\apps\desktop\node_m
odules\.bin;C:\Users\david\AppData\Local\pnpm\.tools\pnpm\9.15.0_tmp_23220\node_modules\pnp
m\dist\node-gyp-bin;C:\Users\david\Documents\GitHub\accomplish\node_modules\.bin;C:\Users\d
avid\AppData\Local\pnpm\.tools\pnpm\9.15.0\bin;C:\Program Files\Microsoft\jdk-21.0.9.10-hot
spot\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\Window
sPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files (x86)\NVIDIA 
Corporation\PhysX\Common;C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR;C:\WINDOWS\syst
em32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WIN
DOWS\System32\OpenSSH\;C:\Program Files (x86)\Windows Kits\10\Windows Performance 
Toolkit\;C:\Program Files\nodejs\;C:\Program Files\Docker\Docker\resources\bin;C:\Program F
iles\Git\cmd;C:\Users\david\.cargo\bin;C:\Users\david\.local\bin;C:\Users\david\AppData\Loc
al\Microsoft\WindowsApps;C:\Users\david\AppData\Local\Programs\Antigravity\bin;C:\Users\dav
id\AppData\Local\Python\bin;C:\Users\david\AppData\Local\Programs\Microsoft VS Code\bin;C:\
Users\david\DevTools\Maven\bin;C:\Users\david\AppData\Roaming\npm;C:\Users\david\AppData\Ro
aming\Python\Scripts;C:\Users\david\AppData\Local\Programs\Ollama[27m"[39m

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m179:24[22m[39m
    [90m177| [39m
    [90m178| [39m        [90m// Assert[39m
    [90m179| [39m        
[34mexpect[39m(result)[33m.[39m[34mtoContain[39m(fnmPath)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m180| [39m      })[33m;[39m
    [90m181| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[15/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mgetExtendedNodePath()[2m > [22mmacOS Platform[2m > [22mshould 
sort NVM versions with newest first
[31m[1mAssertionError[22m: expected -1 to be less than -1[39m
[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m210:26[22m[39m
    [90m208| [39m        [35mconst[39m v16Index [33m=[39m 
pathParts[33m.[39m[34mfindIndex[39m((p) [33m=>[39m 
p[33m.[39m[34mincludes[39m([32m'v16'[39m))[33m;[39m
    [90m209| [39m
    [90m210| [39m        
[34mexpect[39m(v20Index)[33m.[39m[34mtoBeLessThan[39m(v18Index)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m211| [39m        
[34mexpect[39m(v18Index)[33m.[39m[34mtoBeLessThan[39m(v16Index)[33m;[39m
    [90m212| [39m      })[33m;[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[16/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould find executable command in PATH
[31m[1mAssertionError[22m: expected null to be '/usr/local/bin/node' // Object.is 
equality[39m

[32m- Expected:[39m 
"/usr/local/bin/node"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m353:22[22m[39m
    [90m351| [39m
    [90m352| [39m      [90m// Assert[39m
    [90m353| [39m      
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m(expectedPath)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m354| [39m    })[33m;[39m
    [90m355| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[17/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould skip non-executable files
[31m[1mAssertionError[22m: expected '\usr\bin\node' to be null[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
"\\usr\\bin\\node"

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m394:22[22m[39m
    [90m392| [39m
    [90m393| [39m      [90m// Assert[39m
    [90m394| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m395| [39m    })[33m;[39m
    [90m396| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[18/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould search directories in order
[31m[1mAssertionError[22m: expected null to be '/first/bin/node' // Object.is 
equality[39m

[32m- Expected:[39m 
"/first/bin/node"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m413:22[22m[39m
    [90m411| [39m
    [90m412| [39m      [90m// Assert[39m
    [90m413| [39m      
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m(firstPath)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m414| [39m    })[33m;[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (8)[39m
[2m      Tests [22m [1m[31m22 failed[39m[22m[2m | [22m[1m[32m149 passed[39m[22m[90m (171)[39m
[2m   Start at [22m 02:55:37
[2m   Duration [22m 4.99s[2m (transform 4.06s, setup 332ms, import 3.35s, tests 14.05s, environment 2ms)[22m

    [90m415| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[19/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould handle empty path segments
[31m[1mAssertionError[22m: expected null to be '/usr/local/bin/node' // Object.is 
equality[39m

[32m- Expected:[39m 
"/usr/local/bin/node"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m431:22[22m[39m
    [90m429| [39m
    [90m430| [39m      [90m// Assert[39m
    [90m431| [39m      
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m(expectedPath)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m432| [39m    })[33m;[39m
    [90m433| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[20/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould handle directory access errors 
gracefully
[31m[1mAssertionError[22m: expected null to be '/usr/local/bin/node' // Object.is 
equality[39m

[32m- Expected:[39m 
"/usr/local/bin/node"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m452:22[22m[39m
    [90m450| [39m
    [90m451| [39m      [90m// Assert[39m
    [90m452| [39m      
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m(expectedPath)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m453| [39m    })[33m;[39m
    [90m454| [39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[21/22]ÔÄ»[22m
[39m

[41m[1m FAIL [22m[49m [30m[45m integration [49m[39m 
__tests__/integration/main/utils/system-path.integration.test.ts[2m > [22mSystem PATH 
Utilities[2m > [22mfindCommandInPath()[2m > [22mshould handle statSync errors 
gracefully
[31m[1mAssertionError[22m: expected null to be '/usr/local/bin/node' // Object.is 
equality[39m

[32m- Expected:[39m 
"/usr/local/bin/node"

[31m+ Received:[39m 
null

[36m [2mÔØ»[22m 
__tests__/integration/main/utils/system-path.integration.test.ts:[2m473:22[22m[39m
    [90m471| [39m
    [90m472| [39m      [90m// Assert[39m
    [90m473| [39m      
[34mexpect[39m(result)[33m.[39m[34mtoBe[39m(expectedPath)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m474| [39m    })[33m;[39m
    [90m475| [39m  })[33m;[39m

[31m[2mÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»ÔÄ»[22/22]ÔÄ»[22m
[39m

C:\Users\david\Documents\GitHub\accomplish\apps\desktop:
ÔÇëERR_PNPM_RECURSIVE_RUN_FIRST_FAILÔÇë @accomplish/desktop@0.3.8 test:integration: `vitest run --config vitest.integration.config.ts`
Exit status 1
